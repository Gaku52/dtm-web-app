# DTM Web App - Claude Code Configuration

## 🤖 自動動作ルール

このファイルは、Claude Codeがこのリポジトリで作業する際の自動動作を定義します。

---

## 📋 セッション開始時の自動タスク

**必ず以下を実行:**

1. **最新ログの確認**
   ```bash
   # 最新のログファイルを特定
   ls -lt docs/logs/*.md | head -1

   # 内容を読み込み
   Read最新のログファイル
   ```

2. **前回の「次回のアクション」を確認**
   - 最新ログの「次回のアクション」セクションを読む
   - 今日のタスクを理解する

3. **現在のブランチを確認**
   ```bash
   git branch --show-current
   ```

4. **プロジェクトコンテキストを読み込み**
   - `PROJECT_CONTEXT.md` を読む
   - 最新の技術スタックを確認

---

## 💾 作業中の自動タスク

**修正・実装時:**

1. **関連ドキュメントを参照**
   - データベース変更 → `ARCHITECTURE.md`
   - UI実装 → `UI_DESIGN.md`
   - 音声処理 → `SOUND_STRATEGY.md`

2. **設計との整合性チェック**
   - 実装が設計ドキュメントに沿っているか確認
   - 逸脱がある場合は理由を明確に

---

## 📝 セッション終了時の自動タスク

**必ず以下を実行:**

1. **今日のログを作成・更新**
   ```
   ファイル名: docs/logs/YYYY-MM-DD-session-NN.md

   含めるべき内容:
   - 実施した作業
   - 作成・更新したファイル
   - 重要な決定事項
   - 遭遇した問題と解決策
   - 次回のアクション
   ```

2. **Git commit時にログへのリンク**
   - コミットメッセージにログファイルへの参照を含める

3. **次回のアクションを明記**
   - 具体的で実行可能なタスクを列挙

---

## 🔍 常に参照すべきファイル

### 必須参照
- `PROJECT_CONTEXT.md` - プロジェクトの現状
- `docs/logs/[最新].md` - 最新のログ

### 作業内容別の参照
- データベース: `ARCHITECTURE.md`, `supabase/migrations/*.sql`
- UI実装: `UI_DESIGN.md`, `FEATURES.md`
- 音声処理: `SOUND_STRATEGY.md`
- 新機能: `SPEC.md`, `FEATURES.md`

---

## 🚨 重要な制約

### やってはいけないこと
- ログの参照なしに作業を開始しない
- 設計ドキュメントと矛盾する実装をしない
- セッション終了時にログを更新せずに終わらない

### 必ずやること
- 毎回、最新ログを読む
- 作業内容を詳細に記録する
- 次回のアクションを明確にする

---

## 📊 ログ更新のトリガー

以下の場合、**必ず**ログを更新:

1. ファイルを作成・修正した時
2. 重要な技術的決定をした時
3. 問題に遭遇して解決した時
4. セッションを終了する前

---

## 🎯 成功の基準

**良いセッション:**
- ✅ 最新ログを参照してスタート
- ✅ 設計ドキュメントに沿った実装
- ✅ 詳細なログ記録
- ✅ 次回のアクションが明確

**悪いセッション:**
- ❌ ログを参照せずにスタート
- ❌ 設計との不整合
- ❌ ログの更新忘れ
- ❌ 次に何をするか不明確

---

**このルールに従うことで、プロジェクトの品質と開発速度を最大化します。**
