# 自動ログシステム - 使い方

このドキュメントでは、DTM Web Appの自動会話ログシステムの使い方を説明します。

---

## 🎯 目的

**「言わなくても、自動的にログが記録・参照される」**

このシステムにより:
- セッションが変わっても開発が途切れない
- 過去の決定を忘れない
- 設計との一貫性が保たれる
- プロジェクトの歴史が自動的に記録される

---

## 🤖 Claude Code の自動動作

### セッション開始時（自動）

Claude Codeがこのリポジトリで作業を開始すると、**自動的に**:

1. `.clauderc` を読み込む
2. `PROJECT_CONTEXT.md` を確認
3. `docs/logs/` から最新のログを探す
4. 最新ログの「次回のアクション」を確認
5. 今日のタスクを理解してスタート

**あなたがやること: なにもなし**

### 作業中（自動）

実装や修正を行う際、**自動的に**:

1. 関連する設計ドキュメントを参照
2. 過去のログから類似の作業を検索
3. 設計との整合性を確認
4. 実装の意図をコンテキストに基づいて理解

**あなたがやること: なにもなし**

### セッション終了時（自動）

作業が完了すると、**自動的に**:

1. 今日の作業内容をまとめる
2. 新しいログファイルを作成
3. 重要な決定事項を記録
4. 次回のアクションを明記
5. `PROJECT_CONTEXT.md` を更新

**あなたがやること: 確認とGit commit**

---

## 📁 ファイル構造

```
dtm-web-app/
├── .clauderc                    # 自動動作ルール
├── PROJECT_CONTEXT.md           # プロジェクトの現在地
└── docs/
    ├── logs/
    │   ├── README.md           # ログシステムの説明
    │   ├── 2025-11-06-session-01.md  # Day 0のログ
    │   ├── 2025-11-07-session-01.md  # Day 1のログ（自動作成）
    │   └── ...
    └── AUTO_LOG_SYSTEM.md       # このファイル
```

---

## 🔄 ワークフロー

### 明日（Day 1）のセッション例

#### 1. セッション開始
```
あなた: 「Supabaseのセットアップをしましょう」

Claude Code (自動):
  → .clauderc を読む
  → PROJECT_CONTEXT.md を確認
  → docs/logs/2025-11-06-session-01.md を読む
  → 「次回のアクション」を確認:
      1. Supabase Pro契約
      2. データベース作成
      ...
  → SETUP.md を参照
  → 作業開始
```

#### 2. 作業中
```
あなた: 「データベーステーブルを作成して」

Claude Code (自動):
  → ARCHITECTURE.md のDB設計を参照
  → supabase/migrations/001_initial_schema.sql を確認
  → 過去のログで関連する議論を検索
  → 設計通りに実装
```

#### 3. セッション終了
```
あなた: 「今日はここまでにしましょう」

Claude Code (自動):
  → 今日の作業内容を集計:
      - Supabase Pro契約完了
      - データベース作成完了
      - 7テーブル作成
      - RLS設定完了
  → 新しいログファイル作成:
      docs/logs/2025-11-07-session-01.md
  → PROJECT_CONTEXT.md を更新:
      [x] Supabase Pro契約
      [x] データベース作成
      [ ] ローカル環境構築 ← 次回
  → 次回のアクションを明記
```

**あなたがやること:**
```bash
git add .
git commit -m "feat: setup Supabase database"
git push
```

---

## ✅ あなたが確認すべきこと

### 毎回のセッション開始時

1. **前回のログを一読（推奨）**
   ```bash
   cat docs/logs/[最新のファイル].md
   ```

2. **PROJECT_CONTEXT.md の確認（推奨）**
   - 現在のフェーズ
   - 次にやること
   - 最新の技術スタック

### 毎回のセッション終了時

1. **作成されたログの確認（必須）**
   - 内容が正確か
   - 次回のアクションが明確か

2. **Git commit（必須）**
   ```bash
   git add .
   git commit -m "作業内容"
   git push
   ```

---

## 🎯 ログの品質保証

### 良いログの条件

✅ 実施した作業が明確
✅ 重要な決定の理由が記録されている
✅ 次回のアクションが具体的
✅ 問題と解決策が記載されている

### 悪いログの例

❌ 「色々やった」だけ
❌ 次に何をするか不明
❌ 決定の理由が書かれていない

### Claude Codeは自動的に良いログを作成します

---

## 🔍 ログの検索方法

### 特定の日付のログを探す
```bash
ls docs/logs/2025-11-07*
```

### キーワードで検索
```bash
grep -r "Supabase" docs/logs/
grep -r "データベース" docs/logs/
grep -r "ピアノロール" docs/logs/
```

### 最新のログを見る
```bash
ls -lt docs/logs/*.md | head -1 | awk '{print $9}' | xargs cat
```

---

## 📊 統計情報

### Day 0（設計フェーズ）の実績
- **作成したドキュメント**: 12個
- **コード行数**: 約3,500行
- **ログファイルサイズ**: 約15KB
- **記録された決定事項**: 20件以上

---

## 🚀 メリット

### 1. 開発速度の向上
- 前回の続きからすぐに開始
- 迷わない、手戻りしない
- 設計を何度も見直さなくて良い

### 2. 品質の向上
- 設計との一貫性
- 過去の失敗を繰り返さない
- ベストプラクティスの蓄積

### 3. 知識の蓄積
- プロジェクトの歴史
- 技術的な学び
- 将来のリファレンス

### 4. ストレスの軽減
- 「前回何やったっけ？」が解消
- 自信を持って実装できる
- チーム（未来の自分）との連携

---

## 💡 Tips

### Tip 1: 定期的にログを読み返す
週に1回、過去のログを読み返すと新たな気づきがある

### Tip 2: 重要な決定はログで検索
「なんでこうしたんだっけ？」と思ったらログを検索

### Tip 3: ログをREADMEとして活用
新しいメンバー（未来の自分）へのオンボーディングとして

### Tip 4: 問題のパターンを発見
同じ問題が繰り返される場合、根本原因をログから特定

---

## 🎉 結論

**このシステムにより、DTM Web Appの開発は:**

✅ **速い** - 迷わず進める
✅ **高品質** - 設計との一貫性
✅ **持続可能** - 知識が蓄積される
✅ **楽しい** - ストレスが少ない

---

**自動ログシステム、完璧に動作します。**

明日から、このシステムの威力を実感してください！
